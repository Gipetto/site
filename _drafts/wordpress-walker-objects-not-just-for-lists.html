---
layout: post
title: 'WordPress Walker Objects: Not just for lists'
date: 
type: post
parent_id: '0'
published: false
password: ''
status: draft
categories:
- Web Design &amp; Development
- WordPress
tags:
- oop
- php
- scripting
- tables
- walker
- wordpress
meta:
  _edit_last: '1'
author:
  login: admin
  email: shawn@topfroggraphics.com
  display_name: Shawn
  first_name: Shawn
  last_name: Parker
---
<p>They're for tables too!</p>
<p>I've really been wanting to dive in to the WordPress Walker objects for some time but up until recently I just didn't have a practical application for doing so. Well, as you just read, up until recently...</p>
<p>The goal was to list out hierarchical groups of pages in the WordPress admin to create a custom dashboard for a client. I think it worked out rather well. First, lets take a look at the end result:</p>
<p>&lt; place image here &gt;</p>
<p>As you can see the hierarchical representation of the pages is still there but they're grouped by their parent pages in to distinct sets. This will make getting a quick view of the page groups super easy and also allows me to consistently display the edit functions along the right hand side. </p>
<p>So lets take a look at the code. Its pretty straight forward. Lets look at the Walker first.</p>
<p><code class="php">&lt;?php</p>
<p>/**<br />
 * Walker Class Extension<br />
 */<br />
class Walker_Show_Dashboard extends Walker_Page {<br />
	protected $indent;<br />
	protected $indent_depth_multiplier = 4;</p>
<p>	function start_lvl(&amp;$output, $depth) {<br />
		// set the indent for the next level<br />
		$this->indent = str_repeat('&amp;nbsp;', (($depth+1)*$this->indent_depth_multiplier));<br />
	}</p>
<p>	function end_lvl(&amp;$output, $depth) {<br />
		// reset the indent for the current level<br />
		$this->indent = str_repeat('&amp;nbsp;', (($depth)*$this->indent_depth_multiplier));<br />
	}</p>
<p>	function start_el(&amp;$output, $page, $depth, $args, $current_page) {<br />
		// if this is a parent page then open the group<br />
		if ($depth === 0) {<br />
			$output .= '<br />
				&lt;div id="page-group-'.$page->ID.'" class="dash-page-group"&gt;<br />
					&lt;h3&gt;'.apply_filters('the_title', $page->post_title, $page->ID).'&lt;/h3&gt;<br />
					&lt;table class="widefat"&gt;<br />
						&lt;thead&gt;<br />
							&lt;tr&gt;<br />
								&lt;th class="dash-page-title"&gt;Page&lt;/th&gt;<br />
								&lt;th class="dash-page-action"&gt;Action&lt/th&gt;<br />
							&lt;/tr&gt;<br />
						&lt;/thead&gt;<br />
						&lt;tbody&gt;';<br />
		}</p>
<p>		// output the page row<br />
		$output .= '<br />
						&lt;tr&gt;<br />
							&lt;td&gt;'.$this->indent.apply_filters('the_title', $page->post_title, $page->ID).'&lt;/td&gt;<br />
							&lt;td&gt;<br />
								&lt;a class="dash-edit-page" href="'.get_edit_post_link($page->ID).'"&gt;'.__('Edit Page', 'my-text-domain').'&lt;/a&gt;';<br />
		// we only want the children to have children, that's our choice<br />
		if ($page->post_parent != 0) {<br />
				$output .= '&lt;br /&gt;&lt;a href="'.admin_url('post-new.php?post_type=page&parent_id='.$page->ID).'"&gt;'.__('Add Child', 'my-text-domain').'&lt;/a&gt;';<br />
		}<br />
		$output .='<br />
							&lt;/td&gt;<br />
						&lt;/tr&gt;';</p>
<p>	}</p>
<p>	function end_el(&amp;$output, $page, $depth) {<br />
		// if we're closing the parent then close the group<br />
		if ($depth === 0) {<br />
			$output .= '<br />
					&lt;/tbody&gt;<br />
				&lt;/table&gt;<br />
			&lt;/div&gt;';<br />
		}<br />
		else {<br />
			$output .= '&lt;/tr&gt;';<br />
		}<br />
	}</p>
<p>}</p>
<p>?&gt;</code></p>
<p>The Walker object extension takes advantage of the built in nesting level starting points to create an indent offset using non-breaking spaces. Our depth will only be 0 when we're entering a new group of pages so I use it to open and close the group tables.</p>
<p>Now we need a function to output our groups.</p>
<p><code class="php">&lt;?php</p>
<p>/**<br />
 * template tag<br />
 */<br />
function show_page_groups() {<br />
	$pages = new WP_Query(array(<br />
		'post_type' => 'page',<br />
		'hierarchical' => 0,<br />
		'showposts' => -1,<br />
		'orderby' => 'parent title',<br />
		'order' => 'ASC',<br />
		'post_status' => 'any'<br />
	));</p>
<p>	if (!empty($pages)) {<br />
		echo walk_page_tree($pages, 0, null, array(<br />
			'depth' => 0,<br />
			'walker' => new Walker_Page_Dashboard<br />
		));<br />
	}<br />
	else {<br />
		echo '<br />
			&lt;div class="message notice"&gt;&lt;p&gt;'.__('There are no pages to display.', 'my-text-domain').'&lt;/p&gt;&lt;/div&gt;';<br />
	}<br />
}</p>
<p>?&gt;</code></p>
